<!-- templates/recipes.html -->
{% extends 'base.html' %}

{% block title %}Recipes - NaijaPlate{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">My Recipes</h1>
    <a href="#" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
      <i class="fas fa-plus mr-1"></i> Add Recipe
    </a>
  </div>
  
  {% if recipes %}
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for recipe in recipes %}
    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
        <div class="p-4">
          <img 
        src="{{ recipe.image.url }}" 
        srcset="{{ recipe.image.url }} 1x,
                {{ recipe.image.url }} 2x"
        sizes="(max-width: 640px) 100vw, 
               (max-width: 768px) 50vw, 
               (max-width: 1024px) 33vw, 
               25vw"
        alt="{{ recipe.title }}"
        class="w-full h-48 object-cover"
        loading="lazy"
    >
            <h2 class="text-xl font-semibold text-gray-800 mb-2">{{ recipe.title }}</h2>
            <p class="text-sm text-gray-600 mb-4">Added: {{ recipe.created_at|date:"M d, Y" }}</p>
            <div class="flex justify-between items-center">
                <div class="flex space-x-2">
                    <a href="{% url 'recipe_detail' recipe.id %}" class="text-green-600 hover:text-green-800">
                        <i class="fas fa-eye mr-1"></i> View
                    </a>
                    <a href="#" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-edit mr-1"></i> Edit
                    </a>
                </div>
                <button 
                    class="process-recipe-btn px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"
                    data-recipe-id="{{ recipe.id }}"
                    data-loading-text="Processing...">
                    <i class="fas fa-cog mr-1"></i> Process
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
    
    <!-- Pagination -->
<!-- dashboard/templates/recipes.html (add pagination section) -->

{% if is_paginated %}
<div class="pagination flex justify-center mt-8 space-x-2">
    {% if page_obj.has_previous %}
        <a href="?page=1" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">&laquo; first</a>
        <a href="?page={{ page_obj.previous_page_number }}" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">previous</a>
    {% endif %}

    <span class="current px-4 py-2 bg-green-500 text-white rounded-md">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">next</a>
        <a href="?page={{ page_obj.paginator.num_pages }}" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">last &raquo;</a>
    {% endif %}
</div>
{% endif %}
    
  {% else %}
    <div class="bg-white rounded-lg shadow-md p-8 text-center">
      <p class="text-gray-600 mb-4">You haven't added any recipes yet.</p>
      <a href="#" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
        <i class="fas fa-plus mr-1"></i> Add Your First Recipe
      </a>
    </div>
  {% endif %}
</div>
{% endblock %}